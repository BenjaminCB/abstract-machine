module Main where

import System.Directory (doesDirectoryExist, listDirectory)
import System.Environment (getArgs)
import System.FilePath ((</>))

import AST qualified
import AbstractMachine qualified as AM

-- autogenerated
getAllFilePaths :: FilePath -> IO [FilePath]
getAllFilePaths dir = do
    entries <- listDirectory dir
    paths <-
        mapM
            ( \entry -> do
                let fullPath = dir </> entry
                isDir <- doesDirectoryExist fullPath
                if isDir
                    then getAllFilePaths fullPath
                    else return [fullPath]
            )
            entries
    return (concat paths)

main :: IO ()
main = do
    args <- getArgs
    let dir = head args
    paths <- getAllFilePaths dir
    mapM_ putStrLn paths
    print (AST.Lit (AST.IntLit 42))
    print (AM.Lit (AST.IntLit 42))
